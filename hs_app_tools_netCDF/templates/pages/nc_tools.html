{# This template is used as the landing page for NetCDF Resource #}

{% extends "pages/page.html" %}

{% block main %}

    <!-- Tool Page Title -->
    <div id="title" style="margin-bottom:30px">
        <h1>NetCDF Tools</h1>
    </div>

    <!-- Resource Info -->
    {% if nc_res %}
        <div id="resource-info" style="margin-bottom:30px">
            <div id="res-back-btn">
                <a href="{{ nc_res.get_absolute_url }}" type="button" class="btn btn-primary pull-right">Back to Resource Landing Page</a>
            </div>

            <div id="nc-file-name">
                {% for f in nc_res.files.all %}
                    {% if f.resource_file.name|slice:"-3:" == '.nc'%}
                        <h4>NetCDF File: {{ f.resource_file.name|slice:"33:" }}</h4>
                    {% endif %}
                {% endfor %}
            </div>
        </div>

    {% else %}
        <div class="content-block" id="error-info"><h4> There is no netCDF file available for the tools </h4></div>
        <!--TODO:make this section for uploading new netcdf file from local computer-->

    {% endif %}

    <!-- Tool Tabs Section-->
    <div class="tool-tabs">
        <!-- tab header -->
        <div class="panel-tabs">
            <ul class="nav nav-tabs">
                <li class="active col-md-2 col-sm-12 col-xs-12">
                    <a href="#metaEditTab" data-toggle="tab">Edit Metadata</a>
                </li>
                <li class="col-md-2 col-sm-2 col-xs-12">
                    <a href="#dataSubsetTab" data-toggle="tab">Data Subset</a>
                </li>
            </ul>
        </div>

         <!-- tab body -->
        <div class="tabs-body">
            <div class="tab-content">
                <!-- meta edit tab-->
                <div class="active tab-pane" id="metaEditTab">
                    <form class="col-md-6"action="{% url "nc_tools:meta_edit" nc_res.short_id  %}" method="post"> {% csrf_token %}
                        {{ meta_elements_form.as_p }}
                        <input type="submit" value="Edit Meta" class="btn btn-primary"/>
                    </form>
                    <p class="col-md-t">tabel mapping info</p>
                </div>

                <!-- data subset tab -->
                <div class="tab-pane" id="dataSubsetTab">
                    <p> second tab</p>
                </div>
            </div>
        </div>

    </div>


{% endblock %}